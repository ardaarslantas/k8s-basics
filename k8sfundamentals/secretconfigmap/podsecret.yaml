# ğŸ§© 1ï¸âƒ£ Secret'Ä± volume olarak container'a dosya ÅŸeklinde mount eden pod
apiVersion: v1
kind: Pod
metadata:
  name: secretpodvolume     # Pod adÄ±
spec:
  containers:
  - name: secretcontainer   # Container adÄ±
    image: ozgurozturknet/k8s:blue  # KullanÄ±lacak image
    volumeMounts:
    - name: secret-vol      # AÅŸaÄŸÄ±daki volume ismiyle eÅŸleÅŸmeli
      mountPath: /secret    # Secret iÃ§eriÄŸi /secret klasÃ¶rÃ¼ne dosya olarak yazÄ±lÄ±r
  volumes:
  - name: secret-vol
    secret:
      secretName: mysecret3 # KullanÄ±lacak Secret nesnesinin adÄ±
# ğŸ“Œ Bu yÃ¶ntemle Secret iÃ§eriÄŸi environment variable olarak deÄŸil,
# container iÃ§inde dosya olarak /secret/db_username gibi isimlerle yer alÄ±r.
# Ä°Ã§erikleri cat /secret/db_username komutuyla okunabilir.
---

# ğŸ§© 2ï¸âƒ£ Secret'tan deÄŸerleri environment variable olarak tek tek alan pod
apiVersion: v1
kind: Pod
metadata:
  name: secretpodenv        # Pod adÄ±
spec:
  containers:
  - name: secretcontainer
    image: ozgurozturknet/k8s:blue
    env:
      - name: username      # Container iÃ§indeki deÄŸiÅŸkenin adÄ±
        valueFrom:
          secretKeyRef:
            name: mysecret3  # Hangi Secret'tan alÄ±nacak
            key: db_username # Secret iÃ§indeki key adÄ±
      # ğŸ‘‰ username deÄŸiÅŸkeni aslÄ±nda db_username'in deÄŸerini alÄ±r (Ã¶rnek: admin)

      - name: password
        valueFrom:
          secretKeyRef:
            name: mysecret3
            key: db_password
      # ğŸ‘‰ password deÄŸiÅŸkeni db_password'in deÄŸerini alÄ±r (Ã¶rnek: P@ssw0rd!)

      - name: server
        valueFrom:
          secretKeyRef:
            name: mysecret3
            key: db_server
      # ğŸ‘‰ server deÄŸiÅŸkeni db_server'in deÄŸerini alÄ±r (Ã¶rnek: db.example.com)
# ğŸ“Œ Bu yÃ¶ntemde env isimlerini sen belirlersin, Secret key'lerini istediÄŸin isimle eÅŸleÅŸtirebilirsin.
---

# ğŸ§© 3ï¸âƒ£ Secret'taki tÃ¼m key-value'larÄ± otomatik environment variable olarak alan pod
apiVersion: v1
kind: Pod
metadata:
  name: secretpodenvall     # Pod adÄ±
spec:
  containers:
  - name: secretcontainer
    image: ozgurozturknet/k8s:blue
    envFrom:
    - secretRef:
        name: mysecret3     # TÃ¼m Secret key'leri otomatik olarak env deÄŸiÅŸkenine dÃ¶nÃ¼ÅŸÃ¼r
# ğŸ“Œ Burada her key environment variable olur:
# db_username=admin
# db_password=P@ssw0rd!
# db_server=db.example.com
# Yani envFrom â†’ Secret'taki tÃ¼m key'leri otomatik olarak container iÃ§ine aktarÄ±r.
